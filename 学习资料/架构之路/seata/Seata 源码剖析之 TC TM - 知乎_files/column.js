(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1562:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),l=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M9.676 11.252c-.243.433-.542.85-.494 1.237.189 1.509 2.938 1.807 3.746 2.816.59.736.835 1.852.892 3.725.01.303 0 .97-.867.97H1.933c-.915 0-.925-.643-.915-.936.062-1.877.292-3.02.895-3.76.812-.994 3.743-1.267 3.872-2.872.03-.361-.246-.74-.493-1.18C3.917 8.802 3.39 4 7.466 4s3.506 4.941 2.21 7.252zm8.073.79l.002.641c1.57 1.766 4.47 1.307 4.851 3.166.125.61.328 1.538.384 3.232.009.284.014.919-.905.919-.92 0-5.523-.021-6.875-.019 0-2.806-.144-5.987-2.707-6.285.537-.331 1.725-.504 2.178-1.013l.002-.64c-.881.118-2.679-.541-2.679-.541.61-.64.747-1.387 1.192-4.317.355-2.93 2.835-2.903 3.022-2.903.187 0 2.667-.027 3.028 2.903.439 2.93.577 3.677 1.186 4.317 0 0-1.797.659-2.68.54z",fillRule:"evenodd"}))};l.defaultProps={name:"Users"},t.a=l},1643:function(e,t,n){},1689:function(e,t,n){"use strict";n.r(t);var a=n(23),o=n(4),r=n(8),l=n(7),c=n(5),s=n(6),i=n(15),u=n(0),b=n(2),d=n.n(b),p=n(1),O=n.n(p),h=n(12),m=n(31),j=n(131),f=n.n(j),g=n(356),v=n(209),k=n(279),w=n(17),C=function(e){return O.a.createElement(w.a,e,O.a.createElement("path",{d:"M17 6.998h3.018c1.098 0 1.975.89 1.982 2.002v10a1.993 1.993 0 0 1-1.987 2H3.98A1.983 1.983 0 0 1 2 19l.009-10.003c0-1.11.873-1.999 1.971-1.999L7 7V5c.016-1.111.822-2 2-2h6c.98 0 1.86.889 2 2v1.998zM9 7h6V5.5s0-.5-.5-.5h-5c-.504 0-.5.5-.5.5V7z",fillRule:"evenodd"}))};C.defaultProps={name:"Company"};var y,M,T,U=C,N=n(1562),x=n(16),S=n(176),E=n(11),R=n(66),B=n(9),L=n.n(B),z=n(10),F=n(1369),P=n(121),_=n(120),q=n(623),A=n(105),G=n(26),H=n(20),I=(n(1643),Object(h.connect)(null,{updateUserBlocking:A.h,showNotification:G.g})((T=M=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={reportModalShown:!1},n.handleShieldUser=function(){var e=n.props,t=e.user.urlToken,a=e.updateUserBlocking,o=e.showNotification;a(t,!1).then(function(){return o("屏蔽已取消")})},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.user,o=a.urlToken,r=a.isBlocking,l=a.isOrg,c=t.className,s=t.buttonClassName,i=t.onModalOpen,b=t.onModalClose,d=this.context.authRequired,p=this.state.reportModalShown,O=L()("MemberButtonGroup",c);return r?Object(u.b)("div",{className:O},Object(u.b)(z.c,{className:s,preset:"primary",color:"red",onClick:this.handleShieldUser},Object(u.b)(F.a,{center:!0,text:!0})," 已屏蔽"),!l&&Object(u.b)(z.c,{className:s,onClick:d(function(){e.setState({reportModalShown:!0}),i&&i()},H.M.report)},"举报用户",Object(u.b)(_.b,{shown:p,onClose:function(){e.setState({reportModalShown:!1}),b&&b()},type:"member",urlToken:o,zaEnabled:!0}))):Object(u.b)("div",{className:O},Object(u.b)(P.a,{id:o,type:n.type,gender:n.gender,isFollowing:n.isFollowing,className:s,preset:P.a.PRESETS.primary}),Object(u.b)(q.a,{user:n,className:s,onModalOpen:i,onModalClose:b}))}}]),t}(p.Component),M.contextTypes={authRequired:d.a.func},M.propTypes={user:d.a.object.isRequired,buttonClassName:d.a.string,onModalOpen:d.a.func,onModalClose:d.a.func},y=T))||y),V=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.user.isOrg,o=t.className,r=t.buttonClassName,l=t.onModalOpen,c=t.onModalClose,s=this.context,i=s.currentUser,b=s.authRequired,d=s.router,p=L()("ProfileButtonGroup",o);return i&&n.urlToken===i.urlToken?Object(u.b)("div",{className:p},Object(u.b)(z.c,{color:"blue",className:r,onClick:b(function(){E.a.trackEvent(e,{action:"OpenUrl",element:"Link"},{link:{url:"".concat(location.origin,"/people/edit")}}),d.push("/people/edit")},H.M.editProfile)},"编辑",a?"机构":"个人","资料")):Object(u.b)(I,{user:n,className:p,buttonClassName:r,onModalOpen:l,onModalClose:c})}}]),t}(p.Component);V.contextTypes={router:d.a.object.isRequired,currentUser:d.a.object,authRequired:d.a.func},V.propTypes={user:d.a.object.isRequired,buttonClassName:d.a.string,onModalOpen:d.a.func,onModalClose:d.a.func};var J=V,K=n(202),D=n(80),Q=n(629),W=n(569),X=function(e,t){return e.map(function(e){return t[e]}).slice(0,3)},Y=Object(R.isBrowser)()?f()(X,function(e,t){return"".concat(e.join(","),"-").concat(t.length)}):X,Z=[];var $={name:"bmafnj",styles:"&:not(:last-child){margin-bottom:8px;}"},ee=function(e){return Object(u.b)(x.d,Object(i.default)({css:$},e))},te={name:"1emg6zg",styles:"margin-right:.3em;"},ne={name:"1emg6zg",styles:"margin-right:.3em;"},ae=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,childModalOpened:!1},n.loadUserProfile=function(){var e=n.props,t=e.id,a=e.urlToken;return(0,e.dispatch)(Object(A.g)(a||t,!1))},n.load=function(){var e=n.props,t=e.id;(e.urlToken||t)&&(n.setState({isLoading:!0}),n.loadUserProfile().then(function(){return n.setState({isLoading:!1})}),n.loadMutuals())},n.loadMutuals=function(){var e=n.props,t=e.user,a=e.dispatch,o=e.mutuals;return!(void 0===o?[]:o).length&&n.context.currentUser&&t?a(Object(A.e)(t.urlToken,"mutuals")):Promise.resolve()},n.track=function(){var e=n.props.user;n.hoverCardElement&&e&&(E.a.setModule(n.hoverCardElement,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:e.id}}}),E.a.trackCardShow(n.hoverCardElement))},n.handleOpen=function(){n.load(),n.track()},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t,n=this,o=this.props,r=o.toggler,l=o.user,c=o.id,s=o.urlToken,b=o.mutuals,d=void 0===b?[]:b,p=o.onRef,O=Object(a.a)(o,["toggler","user","id","urlToken","mutuals","onRef"]),h=l||{},j=h.isOrg,f=h.name,w=h.headline,C=h.avatarUrl,y=h.badge,M=h.badgeV2,T=h.answerCount,E=h.articlesCount,R=h.followerCount,B=h.employments,L=h.coverUrl,z=h.gender,F=h.isFollowed,P=h.isFollowing,_=this.state,q=_.isLoading,A=_.childModalOpened,G=d.length,I=Object(S.d)(M||y),V=I.bestAnswerer,X=I.identity,Y="//www.zhihu.com/".concat(j?"org":"people","/").concat(s||c),Z=this.context.currentUser,$=Z&&l&&Z.urlToken===l.urlToken,ae=G>0&&!$,oe=B&&B[0];if(null==X?void 0:X.length)t=Object(u.b)(ee,null,Object(u.b)("a",{href:"".concat(H.x,"/account/verification/intro"),target:"_blank",rel:"noopener noreferrer",css:te},Object(u.b)(S.a,null)),Object(u.b)("div",null,X.slice(0,2).map(function(e){return e.description}).join("，")));else if(oe){var re=oe.company,le=oe.job;t=Object(u.b)(ee,null,(re||le)&&Object(u.b)(x.a,{as:"span",mr:".3em",color:"GBL05A"},Object(u.b)(U,{text:!0,center:!0})),Object(u.b)("div",null,re&&re.name,re&&le&&Object(u.b)(x.a,{display:"inline-block",width:"1px",height:"10px",mx:"8px",bg:"GBK09A"}),le&&le.name))}else t=null;return Object(u.b)(k.b,Object(i.default)({toggler:r,onOpen:this.handleOpen,isLoading:q,globalClose:!A,stickHover:A,preventCloseOnTarget:!0},O,{onRef:function(e){p&&"function"==typeof p&&p(e),n.hoverCardElement=e}}),Object(u.b)(k.a,{coverUrl:L,title:Object(u.b)("span",null,Object(u.b)(m.Link,{to:Y,target:"_blank"},f),Object(u.b)(W.a,{isFollowed:F,isFollowing:P})),subtitle:w&&Object(u.b)(K.a,{inline:!0,html:w}),avatarUrl:C}),(t||V||ae)&&Object(u.b)("div",null,t,Boolean(null==V?void 0:null===(e=V.topics)||void 0===e?void 0:e.length)&&Object(u.b)(ee,null,Object(u.b)("span",{css:ne},Object(u.b)(S.b,null)),Object(u.b)("div",null,Object(u.b)(Q.a,{expandable:!1,noHoverCard:!0,topics:V.topics,user:l}),"的优秀回答者")),ae&&Object(u.b)(ee,{color:"GBL05A"},Object(u.b)(x.a,{mr:".3em"},Object(u.b)(N.a,{text:!0,center:!0})),Object(u.b)("div",null,Object(u.b)(g.CJKSpace,null,d.map(function(e,t){return Object(u.b)(m.Link,{key:t,to:"//www.zhihu.com/".concat(j?"org":"people","/").concat(e.urlToken),target:"_blank"},e.name,t<G-1&&"、")}),"也关注了",H.E[z])))),Object(u.b)("div",null,Object(u.b)(v.a,null,Object(u.b)(v.a.Item,{tag:D.a,preset:"plain",to:"".concat(Y,"/answers"),name:"回答",value:T,target:"_blank"}),Object(u.b)(v.a.Item,{tag:D.a,preset:"plain",to:"".concat(Y,"/posts"),name:"文章",value:E,target:"_blank"}),Object(u.b)(v.a.Item,{tag:D.a,preset:"plain",to:"".concat(Y,"/followers"),name:"关注者",value:R,target:"_blank"})),l&&!$&&Object(u.b)(J,{className:"HoverCard-buttons",user:l,onModalOpen:function(){n.hoverCardElement.style.opacity="0",n.setState({childModalOpened:!0})},onModalClose:function(){return n.setState({childModalOpened:!1})}})))}}]),t}(p.PureComponent);ae.contextTypes={currentUser:d.a.object};t.default=Object(h.connect)(function(e,t){var n=t.id,a=t.urlToken,o=e.entities,r=e.people.mutualsByUser,l=o.users[a]||Object.values(o.users).find(function(e){return e.id===n})||t.user,c=r[a||n]||{ids:Z,isFetching:!1},s=c.ids,i=c.isFetching;return{user:l,mutuals:Y(s,o.users),isFetching:i}})(ae)}}]);
//# sourceMappingURL=column.user-hover-card.54d1b85a6ea186e76580.js.map